<div class="page-layout" *ngIf="isAuth0Loading$ | async; else auth0Loaded"></div>

<ng-template #auth0Loaded>
  <div *ngIf="(isAuthenticated | async) && !profileSetup; else profileComplete">
    <get-subscription></get-subscription>
  </div>
  <ng-template #profileComplete>
    <navbar></navbar>
    <div *ngIf="errorNotification && showErrorNotification"
         (click)="showErrorNotification = !showErrorNotification"
         class="alert alert-danger position-absolute bottom-0">
      {{ errorNotification }}
    </div>
    <div *ngIf="userLoaded && !email_verified" class="alert alert-warning">
      Verify your email address to gain full access. Check also the spam box.
    </div>
    <br><br><br>
    <router-outlet></router-outlet>
  </ng-template>
</ng-template>